{% extends 'base/base.html' %}
{% block title %}
    Posts || {{post.slug}}
{% endblock %}
{% block body %}
    <div class="container mt-5">
        <h2>{{post.title}}</h2>
        <div class="row">
            <span class="col-4 border-right">Category : <a href="{% url 'category_single' post.category.slug %}">{{ post.category.title }}</a></span>
            <span class="col-3 border-right">Author : {{post.author.full_name}}</span>
            <span class="col-4">{{post.published_at}}</span>
        </div>
        {% if post.image %}
            <img src="{{post.image.url}}" class="mt-3 w-100 rounded-lg" alt="">
        {% endif %}
        <p class="text-justify my-4">{{post.content}}</p>
        <hr>
        <!-- entering comment -->
        {% if post.post_setting.allow_discussion %}
            <div class="pt-2">            
                <form action="{% url 'post_single' post.slug %}" method="post">
                    {% csrf_token %}
                    {% include 'component/form.html' %}
                    <input type="submit" class="btn btn-outline-info ml-3" value="Submit Comment">
                </form>
            </div>
            <div class="mt-2 rounded border p-2" id="comment-container">
                <h4>Comments</h4>
            {% for comment in post.comments.all %}
                <div class="comment-box-container border-bottom d-flex flex-column align-items-center pt-4">
                    <div class="w-100 flex-column align-items-center rounded px-2">
                        <h6>{{comment.author.full_name}}</h6>
                        <p>{{comment.content}}</p>
                    </div>
                </div>
            {% endfor %}
            </div>
        {% endif %}
        <!-- end of entering comment -->
    </div>
{% endblock %}